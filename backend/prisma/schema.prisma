generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Canvas {
  id           String         @id
  turnUsername String
  content      CanvasContent?
  turn         User           @relation("current", fields: [turnUsername], references: [username])
  users        User[]         @relation("users")
}

model CanvasContent {
  id      String @id
  palate  Palatte 
  canvas  Canvas @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  content String
}

model User {
  username            String   @id
  hash                String
  salt                String
  canvasesCurrentTurn Canvas[] @relation("current")
  tokens              Token[]
  canvases            Canvas[] @relation("users")
}

model Token {
  id           String @id
  userUsername String
  user         User   @relation(fields: [userUsername], references: [username])
}

enum Palatte {
  STANDARD
  PASTEL
}